<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft-Inspired 3D World</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/simplex-noise@2.4.0/simplex-noise.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/PointerLockControls.min.js"></script>
</head>
<body>
    <div id="instructions">
        <h1>Minecraft-Inspired 3D World</h1>
        <p>Use WASD to move, SPACE to jump, MOUSE to look around</p>
        <p>LEFT CLICK to remove blocks, RIGHT CLICK to place blocks</p>
        <p>Select different block types from the menu on the right</p>
        <p>Choose biomes using the buttons at the bottom</p>
        <p>Press E to open crafting menu</p>
        <p>Press TAB to toggle mouse cursor for UI interaction</p>
        <button id="startButton">Start Game</button>
    </div>

    <div id="loadingScreen">
        <h2>Generating World</h2>
        <div id="loadingBar">
            <div id="loadingProgress"></div>
        </div>
        <div id="loadingStatus">Initializing...</div>
    </div>

    <div id="crosshair"></div>

    <div id="timeDisplay">Time: Day</div>

    <div id="ui">
        <button class="biome-btn active" data-biome="forest">Forest</button>
        <button class="biome-btn" data-biome="desert">Desert</button>
        <button class="biome-btn" data-biome="mountains">Mountains</button>
        <button class="biome-btn" data-biome="plains">Plains</button>
    </div>

    <div id="blockSelector">
        <h3>Block Types</h3>
        <div class="block-type selected" data-type="grass">
            <div class="block-preview" style="background-color: #5D9E47;"></div>
            <span>Grass</span>
        </div>
        <div class="block-type" data-type="dirt">
            <div class="block-preview" style="background-color: #8B5A2B;"></div>
            <span>Dirt</span>
        </div>
        <div class="block-type" data-type="stone">
            <div class="block-preview" style="background-color: #888888;"></div>
            <span>Stone</span>
        </div>
        <div class="block-type" data-type="sand">
            <div class="block-preview" style="background-color: #E2D9A2;"></div>
            <span>Sand</span>
        </div>
        <div class="block-type" data-type="wood">
            <div class="block-preview" style="background-color: #8B4513;"></div>
            <span>Wood</span>
        </div>
        <div class="block-type" data-type="leaves">
            <div class="block-preview" style="background-color: #228B22;"></div>
            <span>Leaves</span>
        </div>
    </div>
    
    <div id="worldExpansionIndicator" style="display: none; position: absolute; top: 60px; left: 20px; background: rgba(0, 0, 0, 0.5); color: yellow; padding: 10px; border-radius: 5px; z-index: 10;">
        Expanding World...
    </div>

    <div id="craftingUI">
        <h2 style="text-align: center; margin-top: 0;">Crafting</h2>
        <div id="craftingGrid"></div>
        <div class="resultSlot" id="resultSlot"></div>
        <div id="craftingButtons">
            <button id="craftBtn" disabled>Craft</button>
            <button id="clearBtn">Clear</button>
            <button id="closeCraftingBtn">Close</button>
        </div>
        <h3 style="margin-top: 20px;">Inventory</h3>
        <div id="inventoryGrid"></div>
    </div>

    <div id="inventoryDisplay"></div>

    <div id="uiModeMessage" style="position: absolute; top: 10px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.7); color: white; padding: 10px; border-radius: 5px; z-index: 1000; display: none;">
        UI Mode Active - Click game to resume or press Tab
    </div>

    <button id="respawnButton" style="position: absolute; bottom: 10px; right: 10px; padding: 8px 12px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; z-index: 1000;">Respawn</button>
    
    <div id="statsContainer" style="position: fixed; top: 10px; left: 10px; background: rgba(0, 0, 0, 0.7); color: #00FF00; padding: 5px 10px; border-radius: 5px; font-family: monospace; font-size: 14px; font-weight: bold; z-index: 9999; display: flex; flex-direction: column; gap: 5px;">
        <div id="fpsDisplay">FPS: 0</div>
        <div id="memoryDisplay">Memory: N/A</div>
        <div id="chunkCountDisplay">Chunks: 0</div>
        <div id="queueDisplay">Queue: 0</div>
        <div id="cacheDisplay">Cached: 0</div>
        <button id="perfModeButton" style="margin-top: 5px; background: #333; color: white; border: 1px solid #555; border-radius: 3px; cursor: pointer; padding: 3px 6px; font-size: 12px;">High Performance Mode</button>
    </div>

    <script type="module" src="js/main.js"></script>
</body>
</html>